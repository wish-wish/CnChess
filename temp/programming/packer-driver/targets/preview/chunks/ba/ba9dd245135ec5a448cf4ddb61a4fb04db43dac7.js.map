{"version":3,"sources":["file:///D:/Coding/Creator/CnChess2/assets/scripts/Hrdaya.ts"],"names":["_decorator","Component","Graphics","Vec2","Intersection2D","Vec3","Size","view","screen","UITransform","PointInRect","ccclass","property","Hrdaya","arr","boxcap","idx","idx_fan","xscale","yscale","interval","drawtimes","iscb","g","pts","minx","miny","maxx","maxy","csize","onLoad","self","node","getComponent","start","mode","Draw","reDraw","times","act","RoundRect","Circle","cb","clear","circle","stroke","fill","Ellipse","ellipse","Rect","rect","width","height","roundRect","reCurve","moveTo","i","length","Line","fansec","scalew","scaleh","drawbox","drawOutline","g_fan","getComponentInChildren","stopAnimDraw","isAnimDraw","clearInterval","drawFragile","getChildByName","addComponent","strokeColor","lineWidth","setInterval","LineFan","maxtimes","intval","hitHrdaya","pt","n","offset","scale","getScale","push","x","y","isin","pointInPolygon","ptInRect","hitRect","position","vs","getCanvasSize","inHrdaya1","hitmode","pta","hitRect2","hit","hitRect1","z","point","windowSize","cs","ds","getDesignResolutionSize","pointInPolygonNested","active","fs","getFrameSize","fh","pt1","box","g_box","lineTo","inHrdaya","close","len","pos","count","num","Math","sqrt","trunc","arc","big","PI","radius","min","toset","half","ceil","xp","pow","sin","yp","cos","offsety"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, find, Graphics, Vec2,Intersection2D, Vec3, Color, Size, size,view,screen,director, UITransform} from 'cc';\r\nimport { PointInRect } from './PointInRect';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Hrdaya')\r\nexport class Hrdaya extends Component {\r\n    // [1]\r\n    // dummy = '';\r\n\r\n    // [2]\r\n    // @property\r\n    // serializableDummy = 0;\r\n\r\n    public arr:number[][]=[];\r\n    @property\r\n    public fansec:number=200;\r\n    @property\r\n    public drawbox:boolean=false;\r\n    public boxcap:boolean=false;\r\n    idx:number=0;\r\n    idx_fan:number=0;\r\n    xscale:number=3;\r\n    yscale:number=17*1.1;\r\n    interval:number=0;\r\n    drawtimes:number=0;    \r\n    iscb:boolean=false;    \r\n    g:Graphics=null!;        \r\n    \r\n    public pts:Vec2[]=[];\r\n    public minx:number=1;\r\n    public miny:number=1;\r\n    public maxx:number=1;\r\n    public maxy:number=1;\r\n    \r\n    @property\r\n    public mode:number=0;//0:hrdaya,1:rect,2:roundrect,3:....\r\n    public csize:Size=new Size(100,100);\r\n    @property\r\n    public hitmode:number=1;//\r\n\r\n    @property\r\n    public width:number=2;\r\n    @property\r\n    public height:number=2;\r\n    @property\r\n    public isAnimDraw:boolean=false;\r\n    @property\r\n    public maxtimes:number=1;\r\n    @property\r\n    public intval:number=30;\r\n    @property\r\n    public speeds:number[]=[0.6,6];\r\n\r\n    onLoad()\r\n    {\r\n        let self=this;\r\n        let g=self.node!.getComponent(Graphics);\r\n        self.g=g!;                 \r\n    }\r\n    start () {    \r\n        const self=this;\r\n        if(self.mode==0)\r\n        {\r\n            self.Draw();\r\n            self.reDraw((times:number,act:string)=>{\r\n            });             \r\n        }\r\n        else if(self.mode==1)\r\n        {\r\n            self.RoundRect(()=>{});\r\n        }\r\n    }\r\n    Circle(cb:Function)\r\n    {\r\n        let self=this;\r\n        let g=self.g;        \r\n        if(g)\r\n        {\r\n            g!.clear();\r\n            g!.circle(0,0,60);\r\n            g!.stroke();\r\n            g!.fill();\r\n            if(cb)\r\n                cb(\"end\");\r\n        }\r\n    }\r\n    Ellipse(cb:Function)\r\n    {\r\n        let self=this;\r\n        let g=self.g;\r\n        if(g)\r\n        {\r\n            g!.clear();\r\n            g!.ellipse(0,0,100,70);\r\n            g!.stroke();\r\n            g!.fill();\r\n            if(cb)\r\n                cb(\"end\");\r\n        }\r\n    }\r\n    Rect(cb:Function)\r\n    {\r\n        let self=this;\r\n        let g=self.g;\r\n        if(g)\r\n        {\r\n            g!.clear();\r\n            g!.rect(-self.csize.width/2,-self.csize.height/2,self.csize.width,self.csize.height);\r\n            g!.stroke();\r\n            g!.fill();\r\n            if(cb)\r\n                cb(\"end\");\r\n        }\r\n    }\r\n    RoundRect(cb:Function)\r\n    {\r\n        let self=this;\r\n        let g=self.g;\r\n        if(g)\r\n        {\r\n            g!.clear();\r\n            g!.roundRect(-self.csize.width/2,-self.csize.height/2,self.csize.width,self.csize.height,self.csize.width*0.1);\r\n            g!.stroke();\r\n            g!.fill();\r\n            if(cb)\r\n                cb(\"end\");\r\n        }\r\n    }\r\n    Draw()\r\n    {\r\n        let self=this;\r\n        let g=self.g;        \r\n        if(g)\r\n        {            \r\n            self.reCurve();\r\n            self.idx=0;\r\n            g!.clear();\r\n            g!.moveTo(self.arr[0][0],self.arr[0][1]);\r\n            for(let i=0;i<self.arr.length+1;i++)\r\n            {                \r\n                self.idx=self.Line(g!,self.idx);\r\n            }\r\n        }\r\n    }\r\n    reCurve()\r\n    {\r\n        let self=this;\r\n        if(self.mode==0)\r\n        {\r\n            self.arr=self.Hrdaya(self.fansec,self.fansec,self.fansec);            \r\n            self.minx=self.maxx=this.arr[0][0];\r\n            self.miny=self.maxy=this.arr[0][1];\r\n            self.pts=[];\r\n            for(let i=0;i<self.arr.length+1;i++)\r\n            {                \r\n                if(i>=self.arr.length) continue;\r\n                if(self.minx>self.arr[i][0])\r\n                {\r\n                    self.minx=self.arr[i][0];\r\n                }\r\n                if(self.maxx<self.arr[i][0])\r\n                {\r\n                    self.maxx=self.arr[i][0];\r\n                }\r\n                if(self.miny>self.arr[i][1])\r\n                {\r\n                    self.miny=self.arr[i][1];\r\n                }\r\n                if(self.maxy<self.arr[i][1])\r\n                {\r\n                    self.maxy=self.arr[i][1];\r\n                }                \r\n            }\r\n            self.width=(self.maxx-self.minx);\r\n            self.height=(self.maxy-self.miny);\r\n            let rect=self.node.getComponent(UITransform);\r\n            let scalew=self.width/rect.width;\r\n            let scaleh=self.height/rect.height;\r\n            for(let i=0;i<self.arr.length;i++)\r\n            {\r\n                self.arr[i][0]/=scalew;\r\n                self.arr[i][1]/=scaleh;\r\n            }\r\n            self.minx/=scalew;\r\n            self.miny/=scaleh;\r\n            self.maxx/=scalew;\r\n            self.maxy/=scaleh;\r\n            self.width=(self.maxx-self.minx);\r\n            self.height=(self.maxy-self.miny);\r\n            //console.log(self.width+\":\"+self.height);\r\n            if(self.drawbox)\r\n                self.drawOutline(1);\r\n        }\r\n        else if(self.mode==1)\r\n        {\r\n            let g_fan=self.node.getComponentInChildren(Graphics);  \r\n            g_fan?.clear();\r\n        }\r\n    }\r\n    stopAnimDraw()\r\n    {\r\n        const self=this;\r\n        self.isAnimDraw=false;\r\n        clearInterval(self.interval);\r\n        self.interval=0;\r\n    }\r\n    drawFragile(cb:Function)\r\n    {\r\n        let self=this;\r\n        if(self.arr.length<1) return;                \r\n\r\n        let g=self.g;    \r\n        let node=self.node.getChildByName(\"Node\");                \r\n        if(self.isAnimDraw)\r\n        {\r\n            let g_fan=node!.getComponent(Graphics);         \r\n            if(!g_fan) g_fan=node!.addComponent(Graphics);         \r\n            g_fan!.strokeColor=g.strokeColor; \r\n            g_fan!.lineWidth=g.lineWidth;\r\n\r\n            self.iscb=false;\r\n            self.idx=0;\r\n            self.idx_fan=0;\r\n            self.drawtimes=0;    \r\n            if(cb)\r\n            {                \r\n                cb(self.idx,\"clear\");\r\n            }\r\n            clearInterval(self.interval);\r\n            self.interval=setInterval(()=>{\r\n                if(self.idx_fan==0)\r\n                {\r\n                    //g!.clear();\r\n                    g!.moveTo(self.arr[0][0],self.arr[0][1]);\r\n                    g_fan?.clear();\r\n                    g_fan?.moveTo(self.arr[0][0],self.arr[0][1]);\r\n                    if(self.drawtimes==2&&self.drawbox)\r\n                        self.drawOutline(1);\r\n                }           \r\n                self.idx=self.Line(g!,self.idx);\r\n                self.idx_fan=self.LineFan(g_fan!,self.idx_fan);\r\n                if(self.drawtimes>=self.maxtimes)\r\n                {\r\n                    clearInterval(self.interval);\r\n                    self.interval=0;\r\n                    self.isAnimDraw=false;\r\n                    if(cb){\r\n                        cb(self.drawtimes,\"end\");                                                                \r\n                    }\r\n                }                \r\n                if(self.drawtimes>=self.maxtimes-1)\r\n                {\r\n                    if(cb&&self.idx>(self.fansec/2)&&!self.iscb)\r\n                    {\r\n                        self.iscb=true;\r\n                        cb(self.drawtimes,\"anim\");                        \r\n                    }\r\n                }\r\n                if(cb)\r\n                {\r\n                    cb(self.idx,\"idx\");\r\n                }\r\n            },self.intval);\r\n        }\r\n        else\r\n        {\r\n            self.idx=0;\r\n            g!.clear();\r\n            g!.moveTo(self.arr[0][0],self.arr[0][1]);\r\n            for(let i=0;i<self.arr.length+1;i++)\r\n            {                \r\n                self.idx=self.Line(g!,self.idx);\r\n            }\r\n            if(cb)\r\n                cb(1,\"end\");\r\n        }\r\n    }\r\n    reDraw(cb:Function)\r\n    {        \r\n        const self=this;\r\n        if(self.mode==0)\r\n        {            \r\n            self.drawFragile(cb);\r\n        }\r\n        else if(self.mode==1)\r\n        {\r\n            self.RoundRect(cb);\r\n        }\r\n    }\r\n    hitHrdaya(pt:Vec2)\r\n    {\r\n        //TODO:横竖屏切换时的判断\r\n        const self=this;\r\n        let n=self.node;\r\n        self.pts=[];        \r\n        let offset:Vec2=new Vec2(0,0);\r\n        let scale:Vec3=self.node.getScale();\r\n        for(let i=0;i<self.arr.length;i++)\r\n        {                            \r\n            self.pts.push(new Vec2(self.arr[i][0]*scale.x+offset.x,self.arr[i][1]*scale.y+offset.y));\r\n        }\r\n        let isin=Intersection2D.pointInPolygon(pt,self.pts);\r\n        return isin;\r\n    }\r\n    ptInRect(pt:Vec2,rect:Vec2[])\r\n    {\r\n        const self=this;\r\n        if(pt.x>rect[0].x&&pt.x<rect[1].x&&pt.y>rect[0].y&&pt.y<rect[1].y)\r\n        {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    hitRect(pt:Vec2)\r\n    {\r\n        const self=this;\r\n        let n=self.node;\r\n        let rect:Vec2[]=[];\r\n        let offset:Vec2=new Vec2(n.position.x,n.position.y);\r\n        let vs=view.getCanvasSize();\r\n        rect.push(new Vec2(-self.width/2+offset.x+vs.width/2,-self.height/2+offset.y+vs.height/2));\r\n        rect.push(new Vec2(self.width/2+offset.x+vs.width/2,self.height/2+offset.y+vs.height/2));\r\n        let isin=self.ptInRect(pt,rect);\r\n        return isin;\r\n    }\r\n    inHrdaya1(pt:Vec2)\r\n    {\r\n        const self=this;\r\n        if(self.hitmode==0)\r\n        {\r\n            let pta:number[]=[pt.x,pt.y];\r\n            return self.hitRect2(pta);\r\n        }\r\n        else if(self.hitmode==1)\r\n        {            \r\n            let hit:boolean=self.hitHrdaya(pt);\r\n            return hit;\r\n        }\r\n    }\r\n    hitRect1(pt:number[])\r\n    {\r\n        const self=this;\r\n        let n=self.node;        \r\n        let rect:number[][]=[];\r\n        let offset:Vec2=new Vec2(n.position.x,n.position.y);\r\n        let scale:Vec3=new Vec3(n.scale.x,n.scale.y,n.scale.z);\r\n        \r\n        let point:number[]=[];\r\n        screen.windowSize;\r\n        let cs=view.getCanvasSize();\r\n        let ds=view.getDesignResolutionSize();\r\n        point=[pt[0]/cs.width*ds.width,pt[1]/cs.height*ds.height];\r\n\r\n        rect.push([self.minx*scale.x+offset.x+ds.width/2,self.miny*scale.y+offset.y+ds.height/2]);\r\n        rect.push([self.maxx*scale.x+offset.x+ds.width/2,self.miny*scale.y+offset.y+ds.height/2]);\r\n        rect.push([self.maxx*scale.x+offset.x+ds.width/2,self.maxy*scale.y+offset.y+ds.height/2]);\r\n        rect.push([self.minx*scale.x+offset.x+ds.width/2,self.maxy*scale.y+offset.y+ds.height/2]);\r\n        let isin=PointInRect.pointInPolygonNested(point,rect);        \r\n        return isin;\r\n    }\r\n    hitRect2(pt:number[])\r\n    {        \r\n        const self=this;\r\n        if(!self.node.active)\r\n        {\r\n            return false;\r\n        }        \r\n        let n=self.node;        \r\n        let rect:number[][]=[];\r\n        let offset:Vec2=new Vec2(n.position.x,n.position.y);\r\n        let scale:Vec3=new Vec3(n.scale.x*1.13,n.scale.y*1.13,n.scale.z*1.13);\r\n        let cs=view.getCanvasSize();\r\n        let ds=view.getDesignResolutionSize();\r\n        let fs=view.getFrameSize();\r\n        let x:number=pt[0]/cs.width*ds.width;\r\n        let y:number=pt[1]/cs.height*ds.height;\r\n        let fh=ds.width/fs.width*fs.height;\r\n        let scaleh=fh/ds.height;\r\n        let pt1=[x-ds.width/2,(y-ds.height/2)*scaleh];\r\n        rect.push([self.minx*scale.x+offset.x,self.miny*scale.y+offset.y]);\r\n        rect.push([self.maxx*scale.x+offset.x,self.miny*scale.y+offset.y]);\r\n        rect.push([self.maxx*scale.x+offset.x,self.maxy*scale.y+offset.y]);\r\n        rect.push([self.minx*scale.x+offset.x,self.maxy*scale.y+offset.y]);\r\n        let isin=PointInRect.pointInPolygonNested(pt1,rect);\r\n        \r\n        return isin;\r\n    }\r\n    drawOutline(scale:number=1)\r\n    {\r\n        const self=this;        \r\n        let rect:Vec2[]=[];   \r\n        let offset:Vec2=new Vec2(0,0);        \r\n        rect.push(new Vec2(self.minx*scale+offset.x,self.miny*scale+offset.y));\r\n        rect.push(new Vec2(self.maxx*scale+offset.x,self.miny*scale+offset.y));\r\n        rect.push(new Vec2(self.maxx*scale+offset.x,self.maxy*scale+offset.y));\r\n        rect.push(new Vec2(self.minx*scale+offset.x,self.maxy*scale+offset.y));\r\n        let box=self.node.getChildByName(\"box\");\r\n        // if(!box)\r\n        // {\r\n        //     box=new Node();\r\n        //     box.name=\"box\"\r\n        //     box.setParent(self.node);\r\n        // }\r\n        let g_box=box.getComponent(Graphics);\r\n        if(!g_box)\r\n        {\r\n            g_box=box.addComponent(Graphics);\r\n        }\r\n        g_box?.clear();        \r\n        g_box!.strokeColor=self.g.strokeColor;\r\n        g_box!.moveTo(rect[0].x,rect[0].y);\r\n        g_box!.lineTo(rect[1].x,rect[1].y);\r\n        g_box!.lineTo(rect[2].x,rect[2].y);\r\n        g_box!.lineTo(rect[3].x,rect[3].y);\r\n        g_box!.lineTo(rect[0].x,rect[0].y);\r\n        g_box!.stroke();\r\n    }\r\n    inHrdaya(pt:Vec2)\r\n    {\r\n        const self=this;\r\n        if(self.mode==0)\r\n        {\r\n            return self.hitRect(pt);\r\n        }\r\n        else if(self.mode==1)\r\n        {\r\n            //TODO:\r\n        }\r\n    }\r\n    Line(g:Graphics,idx:number)\r\n    {        \r\n        const self=this;\r\n        if(idx<self.arr.length)\r\n        {            \r\n            g!.lineTo(self.arr[idx][0], self.arr[idx][1]);\r\n            g!.stroke();\r\n            idx+=1;\r\n        }\r\n        else if(idx<=(self.arr.length+10))\r\n        {        \r\n            if(idx==self.arr.length)\r\n            {                \r\n                g!.close();\r\n                g!.stroke();\r\n                g!.fill();                \r\n            }\r\n            idx+=1;\r\n        }\r\n        else if(idx>(self.arr.length+10))\r\n        {                    \r\n            self.drawtimes++;\r\n            g!.moveTo(self.arr[0][0], self.arr[0][1]);\r\n            idx=0;\r\n        }\r\n        return idx;        \r\n    }\r\n    LineFan(g:Graphics,idx:number)\r\n    {       \r\n        const self=this; \r\n        if(idx<self.arr.length)\r\n        {            \r\n            g!.lineTo(self.arr[idx][0], self.arr[idx][1]);\r\n            g!.stroke();\r\n            g!.moveTo(self.arr[0][0], self.arr[0][1]);\r\n            g!.lineTo(self.arr[idx][0],self.arr[idx][1]);\r\n            g!.stroke();\r\n            idx+=1;\r\n        }\r\n        else if(idx<=(self.arr.length+10))\r\n        {        \r\n            if(idx==self.arr.length)\r\n            {                \r\n                g!.clear();\r\n            }\r\n            idx+=1;\r\n        }\r\n        else if(idx>(self.arr.length+10))\r\n        {                    \r\n            self.drawtimes++;\r\n            idx=0;\r\n        }\r\n        return idx;        \r\n    }\r\n\r\n    Hrdaya(len:number,pos:number,count:number):number[][]\r\n    {\r\n        const self=this;        \r\n        let num=Math.sqrt(len);\r\n        let x=pos%num;\r\n        let y=Math.trunc(pos/num);\r\n        let arc=0;\r\n        let big=16;\r\n        if(count>=big)\r\n        {\r\n            arc=2*Math.PI/(count+4+count%2);            \r\n        }\r\n        else\r\n        {\r\n            arc=2*Math.PI/(count+4);\r\n        }\r\n        let radius=Math.min(count/Math.PI/4,1.4);\r\n        let start=0;\r\n        let toset=0;\r\n        let half=Math.trunc(Math.ceil(count/2));\r\n        let arr=[];\r\n        for(let i=0;i<count;i++)\r\n        {\r\n            if(count%2==0)\r\n            {\r\n                if(i==1||i==half||i==(half+1)) toset+=1;\r\n            }\r\n            else\r\n            {\r\n                if(count>=big)\r\n                {\r\n                    if(i==0) { toset+=1; } else if(i==(half+1)) { toset+=1.5; }else if(i==(half+2)) { toset+=0.5; }\r\n                }\r\n                else\r\n                {\r\n                    if(i==0) { toset+=1; } else if(i==(half+1)) { toset+=2.0; } else if(i==(half+2)) { toset+=0.5; }\r\n                }\r\n            }\r\n            let xp=radius*16*Math.pow(Math.sin(start+arc*toset),3);\r\n            let yp=radius*(13*Math.cos(start+arc*toset)-5*Math.cos(start+2*arc*toset)-2*Math.cos(start+3*arc*toset)-Math.cos(start+4*arc*toset));\r\n            let offsety=1.7;\r\n            arr.push([xp*1.18*self.xscale,(yp+offsety)*0.18*self.yscale]);\r\n            if(count%2==0)\r\n            {\r\n                toset+=1.0;\r\n            }\r\n            else\r\n            {\r\n                toset+=1.0;\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n    // update (deltaTime: number) {\r\n    //     // [4]\r\n    // }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.0/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.0/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.0/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}