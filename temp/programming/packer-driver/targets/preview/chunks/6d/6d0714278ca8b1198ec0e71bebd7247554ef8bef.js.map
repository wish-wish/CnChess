{"version":3,"sources":["file:///D:/Coding/Creator/CnChess2/assets/scripts/Utils.ts"],"names":["_decorator","Component","Color","resources","TextAsset","Prefab","sys","misc","js","math","ccclass","property","Utils","start","update","deltaTime","parseHex","str","i","ret","length","ch","Number","parseInt","hex2Num","hex","val","isInited","self","initeds","findPrefab","path","key","value","prefabs","undefined","findPrefabn","name","entry","loadPrefabs","cb","cachep","load","err","prefab","console","warn","pair","set","data","_name","numInterval","ms","times","intval","setInterval","clearInterval","intercounts","delete","isInterval","interval","has","delInterval","clear","oneInterval","randomColor","r","randomRangeInt","g","b","randomRed","color","reds","RED","MAGENTA","randomGreen","GREEN","randomBlue","BLUE","antiColor","col","hsv","toHSV","h","fromHSV","s","v","sameColor","va","htmValRegex","regex","cmd","replace","arguments","readSubjects","text","subjects","split","urlParse","reg","RegExp","window","location","search","substr","match","log","url","URL","href","searchParams","forEach","par","toString","deviceParse","B64Encode","input","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","UTF8Encode","charCodeAt","isNaN","_keyStr","charAt","B64Decode","indexOf","String","fromCharCode","UTF8Decode","string","utftext","n","c","c1","c2","c3","httpGet","xhr","XMLHttpRequest","open","setRequestHeader","responseType","timeout","onreadystatechange","aa","readyState","status","responseText","onload","e","response","send","httpPost","paramstr","httpPostForm","params","form","document","createElement","action","target","method","style","display","opt","ps","p","append","body","submit","model","device_type","navigator","userAgent","j","m","os","platform","Array","curridx","Map","intervals","uguid","blackchs","redchs","xChessPos","baseDict"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node,Color, randomRangeInt, resources, TextAsset, Prefab, ParticleUtils, director, sys, misc, js, math } from 'cc';\nimport { JSB } from 'cc/env';\n//import {systemi} from 'system-info';\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('Utils')\nexport class Utils extends Component {\n    \n    public static subjects:string[]=new Array<string>();\n    public static curridx:number=0;    \n    public static initeds:boolean[]=[false,false,false,false,false,false,false,false];\n    public static prefabs:Map<string,(string|Prefab)[]>=new Map();\n    public static intervals:number[]=[];\n    public static intercounts:Map<number,(number|Function)[]>=new Map();\n    public static uguid:string=\"id_abc123\";\n\n    public static blackchs:string[]=[\n        \"black_ju\",\"black_ma\",\"black_pao\",\"black_xiang\",\"black_shi\",\"black_jiang\",\"black_bing\"\n    ];\n    public static redchs:string[]=[\n        \"red_ju\",\"red_ma\",\"red_pao\",\"red_xiang\",\"red_shi\",\"red_shuai\",\"red_bing\"\n    ];\n    public static xChessPos:number[]=[];    \n\n    start() {\n\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    public static parseHex(str:string,i:number)\n    {\n        // escape()\t使用转义序列替换某些字符来对字符串进行编码\n        // unescape()\t对使用 escape() 编码的字符串进行解码\n        // encodeURI()\t通过转义某些字符对 URI 进行编码\n        // decodeURI()\t对使用 encodeURI() 方法编码的字符串进行解码\n        // encodeURIComponent()\t通过某些转义字符对 URI 的组件进行编码\n        // deencodeURIComponent()\t对使用 encodeURIComponent() 方法编码的字符串进行解码\n\n        // ES6新增了几个专门处理4字节码点的函数。\n        // String.fromCodePoint()：从Unicode码点返回对应字符\n        // String.prototype.codePointAt()：从字符返回对应的码点\n        // String.prototype.at()：返回字符串给定位置的字符\n        \n        let ret:number=0;\n        if(i<str.length)\n        {\n            let ch=str[i];\n            if(ch=='A'||ch=='a')\n            {\n                ret=10;\n            }\n            else if(ch=='B'||ch=='b')\n            {\n                ret=11;\n            }\n            else if(ch=='C'||ch=='c')\n            {\n                ret=12;\n            }\n            else if(ch=='D'||ch=='d')\n            {\n                ret=13;\n            }\n            else if(ch=='E'||ch=='e')\n            {\n                ret=14;\n            }\n            else if(ch=='F'||ch=='f')\n            {\n                ret=15;\n            }\n            else\n            {                \n                ret=Number.parseInt(ch);                \n            }\n        }else\n        {\n            ret=0;   \n        }    \n        return ret;    \n    }\n    public static hex2Num(str:string)\n    {\n        let ret:number=0,hex:number=1;\n        for(let i=0;i<str.length-1;i++)\n        {            \n            let val=this.parseHex(str,str.length-1-i);            \n            ret+=val*hex;\n            //console.log(val+\":\"+hex+\":\"+ret);\n            hex*=16;\n        }\n        return ret;\n    }\n\n    static isInited()\n    {\n        const self=this;\n        let isInited=true;\n        for(let i=0;i<Utils.initeds.length;i++)\n        {\n            if(!Utils.initeds[i])\n            {\n                isInited=false;                \n                break;\n            }\n        }\n        return isInited;\n    }\n\n    static findPrefab(path:string)\n    {\n        for(let [key,value] of Utils.prefabs)\n        {\n            if(value[0]==path)\n            {\n                return value[1];\n            }\n        }\n        return undefined;        \n    }\n\n    static findPrefabn(name:string)\n    {\n        for(let entry of Utils.prefabs)\n        {\n            if(entry[0]==name)\n            {\n                return entry[1][1];\n            }\n        }\n        return undefined as any;\n    }\n\n    static loadPrefabs(path:string,cb:Function)\n    {\n        let cachep=Utils.findPrefab(path);\n        if(cachep)\n        {\n            cb(cachep);\n        }\n        else\n        {\n            resources.load(path,Prefab,(err:any,prefab:Prefab)=>{                \n                if(err)\n                {\n                    console.warn(err);\n                }                            \n                let pair=[path,prefab];\n                Utils.prefabs.set(prefab.data._name,pair);\n                cb(prefab);\n            });\n        }\n    }\n\n    static numInterval(cb:Function,ms:number,times:number=-1)\n    {        \n        let intval=setInterval((times,cb)=>{                           \n            if(times==-1)\n            {                \n                if(cb)cb(times);\n            }\n            else\n            {\n                times--;\n                if(times<1)\n                {\n                    clearInterval(intval);\n                    Utils.intercounts.delete(intval);\n                }else\n                {\n                    Utils.intercounts.set(intval,[ms,times,cb]);\n                }\n                //console.log(Date.now()+\":callback:\"+intval+\":\"+ms+\"times:\"+times);\n                if(cb)cb(times);\n            }\n        },ms,times,cb);\n        //console.log(Date.now()+\":start:\"+intval);\n        Utils.intercounts.set(intval,[ms,times,cb]);\n        return intval;\n    }\n\n    static isInterval(interval:number)\n    {\n        return Utils.intercounts.has(interval);\n    }\n\n    static delInterval(interval:number)\n    {\n        clearInterval(interval);\n        Utils.intercounts.delete(interval);\n        return -1;\n    }\n\n    static clearInterval()\n    {\n        for(let entry of Utils.intercounts)\n        {\n            clearInterval(entry[0]);\n        }\n        Utils.intercounts.clear();\n    }\n\n    static oneInterval(cb:Function,ms:number)\n    {        \n        let intval=this.numInterval(cb,ms,1);\n        // let intval=setInterval(()=>{\n        //     clearInterval(intval);\n        //     if(cb) cb();\n        // });\n        return intval;\n    }\n    static randomColor()\n    {\n        let r=math.randomRangeInt(0,256);\n        let g=math.randomRangeInt(0,256);\n        let b=math.randomRangeInt(0,256);\n        //let a=math.randomRangeInt(0,256);\n        return new Color(r,g,b);\n    }\n    static randomRed()\n    {\n        let color:Color=new Color(math.randomRangeInt(0,256),0,0);\n        let reds:Color[]=[Color.RED,Color.MAGENTA,color];\n        return reds[math.randomRangeInt(0,reds.length)];\n    }\n    static randomGreen()\n    {\n        let color:Color=new Color(0,math.randomRangeInt(0,256),0);\n        let reds:Color[]=[Color.GREEN,color];\n        return reds[math.randomRangeInt(0,reds.length)];\n    }\n    static randomBlue()\n    {\n        let color:Color=new Color(0,0,math.randomRangeInt(0,256));\n        let reds:Color[]=[Color.BLUE,color];\n        return reds[math.randomRangeInt(0,reds.length)];\n    }\n    static antiColor(col:Color)\n    {\n        //TODO:互补色，临近色，暖色，冷色，对比，冲击\n        let color=new Color(col);\n        let hsv=color.toHSV();        \n        hsv.h=((hsv.h*360+180)%360)/360;\n        color.fromHSV(hsv.h,hsv.s,hsv.v);\n        return color;\n    }\n    static sameColor(col:Color,val?:number)\n    {\n        let va=60;\n        if(val) va=val;\n        let color=new Color(col);\n        let hsv=color.toHSV();        \n        hsv.h=((hsv.h*360+va)%360)/360;\n        color.fromHSV(hsv.h,hsv.s,hsv.v);\n        return color;\n    }\n    static htmValRegex(str:string)\n    {\n        let regex=/\\<[^>]*\\>(([^<])*)/g;\n        let cmd=str.replace(regex, function() {\n            return arguments[1];\n        });\n        return cmd;   \n    }\n    static readSubjects(cb:Function)\n    {\n        //it is very slow on the internet enviroment, why\n        resources.load(\"level/sudoku17\",TextAsset,(err:any,text:TextAsset)=>{\n            if(err)\n            {\n                console.warn(err);\n            }\n            Utils.subjects=text.text.split('\\n');\n            Utils.initeds[6]=true;\n            if(cb)cb(Utils.subjects);\n        });\n    }\n\n    static urlParse()\n    {\n        //var vars = query.split(\"?&\");\n        var name=\"launch\";\n        var reg = new RegExp(\"(^|&)\"+ name +\"=([^&]*)(&|$)\");\n        if(window.location.search.length>0)\n        {\n            var r = window.location.search.substr(1).match(reg);\n            console.log(r[2]);\n            let url=new URL(window.location.href);\n            url.searchParams.forEach((val:string,key:string,par:URLSearchParams)=>{\n                console.log(val+\":\"+par.toString());\n            },\"abc\");\n        }     \n        Utils.deviceParse();   \n    }    \n\n    public static baseDict = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    public static _keyStr:string = \"BCDEFHIJKLMNOQRSTUVWXYZbcdefhijklmnoqrstuvwxyz0123456789\";\n    public static B64Encode(input:string) {\n        var output = \"\";\n        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n        var i = 0;\n        input = Utils.UTF8Encode(input);\n        while (i < input.length) {\n            chr1 = input.charCodeAt(i++);\n            chr2 = input.charCodeAt(i++);\n            chr3 = input.charCodeAt(i++);\n            enc1 = chr1 >> 2;\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n            enc4 = chr3 & 63;\n            if (isNaN(chr2)) {\n                enc3 = enc4 = 64;\n            } else if (isNaN(chr3)) {\n                enc4 = 64;\n            }\n            output = output +\n                Utils._keyStr.charAt(enc1) + Utils._keyStr.charAt(enc2) +\n                Utils._keyStr.charAt(enc3) + Utils._keyStr.charAt(enc4);\n        }\n        return output;\n    }\n    public static B64Decode(input:string) {\n        var output = \"\";\n        var chr1, chr2, chr3;\n        var enc1, enc2, enc3, enc4;\n        var i = 0;\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n        while (i < input.length) {\n            enc1 = Utils._keyStr.indexOf(input.charAt(i++));\n            enc2 = Utils._keyStr.indexOf(input.charAt(i++));\n            enc3 = Utils._keyStr.indexOf(input.charAt(i++));\n            enc4 = Utils._keyStr.indexOf(input.charAt(i++));\n            chr1 = (enc1 << 2) | (enc2 >> 4);\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n            chr3 = ((enc3 & 3) << 6) | enc4;\n            output = output + String.fromCharCode(chr1);\n            if (enc3 != 64) {\n                output = output + String.fromCharCode(chr2);\n            }\n            if (enc4 != 64) {\n                output = output + String.fromCharCode(chr3);\n            }\n        }\n        output = Utils.UTF8Decode(output);\n        return output;\n    }\n    public static UTF8Encode(string:string) {\n        string = string.replace(/\\r\\n/g, \"\\n\");\n        var utftext = \"\";\n        for (var n = 0; n < string.length; n++) {\n            var c = string.charCodeAt(n);\n            if (c < 128) {\n                utftext += String.fromCharCode(c);\n            } else if ((c > 127) && (c < 2048)) {\n                utftext += String.fromCharCode((c >> 6) | 192);\n                utftext += String.fromCharCode((c & 63) | 128);\n            } else {\n                utftext += String.fromCharCode((c >> 12) | 224);\n                utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n                utftext += String.fromCharCode((c & 63) | 128);\n            }\n\n        }\n        return utftext;\n    }\n    public static UTF8Decode(utftext:string) {\n        var string = \"\";\n        var i = 0;\n        let c=0,c1=0,c2 = 0,c3=0;\n        while (i < utftext.length) {\n            c = utftext.charCodeAt(i);\n            if (c < 128) {\n                string += String.fromCharCode(c);\n                i++;\n            } else if ((c > 191) && (c < 224)) {\n                c2 = utftext.charCodeAt(i + 1);\n                string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n                i += 2;\n            } else {\n                c2 = utftext.charCodeAt(i + 1);\n                c3 = utftext.charCodeAt(i + 2);\n                string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n                i += 3;\n            }\n        }\n        return string;\n    }\n\n    static httpGet(url:string)\n    {\n        let xhr=new XMLHttpRequest();        \n        xhr.open('GET',url);\n        xhr.setRequestHeader('Content-Type', 'text/plain');\n        xhr.responseType='text';\n        xhr.timeout=5000;\n        xhr.onreadystatechange=function(aa){\n            if(xhr.readyState==4&&xhr.status==200||xhr.status==304)\n            {\n                console.log(\"xhr:\"+xhr.responseText);\n            }\n        };\n        xhr.onload = function(e){\n            if(this.status==200)\n            {\n                console.log(\"xhr:\"+this.response);\n                console.log(\"xhr:\"+this.responseText);\n            }\n        };\n        xhr.send();\n    }\n\n    static httpPost(url:string,paramstr:string)\n    {\n        let xhr=new XMLHttpRequest();        \n        xhr.open('POST',url);\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencode');\n        xhr.responseType='text';\n        xhr.timeout=5000;\n        xhr.onreadystatechange=function(aa){\n            if(xhr.readyState==4&&xhr.status==200||xhr.status==304)\n            {\n                console.log(\"xhr:\"+xhr.responseText);\n            }\n        };\n        xhr.onload = function(e){\n            if(this.status==200)\n            {\n                console.log(\"xhr:\"+this.response);\n                console.log(\"xhr:\"+this.responseText);\n            }\n        };\n        xhr.send(paramstr);\n    }\n\n    static httpPostForm(url:string,params:string)\n    {\n        var form=document.createElement(\"form\");\n        form.action=url;\n        form.target=\"_self\";\n        form.method=\"post\";\n        form.style.display=\"none\";        \n        var opt=document.createElement(\"textarea\");\n        var ps=params.split(\"&\");\n        for(var i=0;i<ps.length;i++)\n        {\n            let p=ps[i].split(\"=\");\n            opt.name=p[0];\n            opt.value=p[1];\n            form.append(opt);\n        }\n        document.body.append(form);\n        form.submit();\n    }\n\n    static deviceParse()\n    {\n        // var obj = new ActiveXObject(\"WbemScripting.SWbemLocator\");\n        // var s = obj.ConnectServer(\".\");\n        // var properties = s.ExecQuery(\"Select * from Win32_NetworkAdapterConfiguration\");\n        // var e = new Enumerator (properties);        \n        // while(!e.atEnd())\n        // {\n        //     e.moveNext();\n        //     var p = e.item ();\n        //     if(!p) continue;\n        //     if (p.IPEnabled) \n        //         return  p.MACAddress;\n        // }\n        // return \"\";\n        var model=\"\";\n        var device_type=navigator.userAgent;\n        var s=sys;\n        var j=js;\n        var m=misc;        \n        //var jb=jsb;\n        \n        //jb.reflection.callStaticMethod();\n\n        //console.log(s.os+\":\"+jb.device.getBatteryLevel()+\":\");\n        console.log(\"os:\"+s.os);\n        console.log(\"platform:\"+s.platform);\n        //TODO:getthe device id-mac-ip-e.imsi-imei、imsi、uuid\n        //imei: (String 类型 )设备的国际移动设备身份码\n        //https://blog.csdn.net/weixin_32596893/article/details/117870481?utm_term=html5%E8%8E%B7%E5%BE%97mac%E5%9C%B0%E5%9D%80&utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~all~sobaiduweb~default-3-117870481-null-null&spm=3001.4430\n\n        // var md=new MobileDetect(device_type);        \n        // var os=md.os();\n        // if(os==\"iOS\"){\n        //     os=md.os()+md.version(\"iPhone\");\n        //     model=md.mobile();\n        // }else\n        // if(os==\"ANdroidOS\"){\n        //     os=md.os()+md.version(\"Android\");\n        //     var sss=device_type.split(\";\");\n        //     var i = sss.contains(\"Build/\");\n        //     if (i > -1) {\n        //         model = sss[i].substring(0, sss[i].indexOf(\"Build/\"));\n        //     }\n        // }\n    }\n}\n\n"]}