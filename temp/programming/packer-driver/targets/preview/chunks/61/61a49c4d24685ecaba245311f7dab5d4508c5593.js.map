{"version":3,"sources":["file:///D:/Coding/Creator/CnChess2/assets/scripts/Chess/Plate.ts"],"names":["_decorator","Component","Color","Graphics","UITransform","Size","Vec3","Label","math","instantiate","RichTextComponent","SpriteComponent","SpriteFrame","Texture2D","Utils","ccclass","property","Plate","type","grap","ut","xPoints","xPlusPot","XRoad","xWords","blackchs","redchs","xChessPos","blackpos","redpos","allpos","Map","cells","rect","border","edge","initPos","i","length","j","set","push","start","getComponent","console","warn","color","draw","log","loadPrefabs","prefab","forEach","img","key","n","rtc","getComponentInChildren","string","lineHeight","fontSize","node","active","sprite","spriteFrame","texture","setParent","setPosition","words","add","width","height","quat","Quat","fromEuler","rotation","setRotation","ords","idx","pos","x","y","s","contentSize","strokeColor","RED","pts","row","col","stroke","moveTo","lineTo","leftx","lefty","drawCorss","p","p1","unicodeTest","v","hex2Num","parseHex","str","ret","ch","Number","parseInt","hex","val","plslen","spare","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Color, Graphics, UITransform, Size, Vec3, Vec2, Vec4, isUnicodeCJK, fragmentText, Label, math, VERSION, JavaScript, TypeScript, Prefab, instantiate, RichText, RichTextComponent, Quat, LabelComponent, SpriteComponent, SpriteFrame, Texture2D } from 'cc';\nimport { Utils } from '../Utils';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Plate')\nexport class Plate extends Component {\n    @property({type:Color})\n    public color:Color;\n    @property({type:Label})\n    public label:Label;\n\n    grap:Graphics=null;\n    ut:UITransform=null;\n    xPoints:Vec3[]=[];\n    \n    xPlusPot:number[]=[0,1,2,3,4,5,6,7,8,19,25,27,29,31,33,35];\n    \n    XRoad:number[]=[3,13,23,21,13,5];\n    xWords:number[]=[37,38,41,42];\n\n    blackchs:string[]=[\n        \"black_ju\"\n        ,\"black_ma\"\n        ,\"black_pao\"\n        ,\"black_xiang\"\n        ,\"black_shi\"\n        ,\"black_jiang\"\n        ,\"black_bing\"        \n    ];\n    redchs:string[]=[\n        \"red_ju\"\n        ,\"red_ma\"\n        ,\"red_pao\"\n        ,\"red_xiang\"        \n        ,\"red_shi\"\n        ,\"red_shuai\"\n        ,\"red_bing\"\n    ];\n    xChessPos:number[]=[];\n    blackpos:number[][]=[[0,0,8],[1,1,7],[2,19,25],[4,3,5],[3,2,6],[5,4],[6,27,29,31,33,35]];\n    redpos:number[][]=[[0,0,8],[1,1,7],[2,19,25],[4,3,5],[3,2,6],[5,4],[6,27,29,31,33,35]];\n    allpos:Map<number,string>=new Map<number,string>();\n    cells:Size;\n    rect:Vec3[]=[];\n    border:number=15;\n    edge:number=20;\n    initPos()\n    {\n        for(let i=0;i<this.blackpos.length;i++)\n        {            \n            for(let j=1;j<this.blackpos[i].length;j++)\n            {\n                this.redpos[i][j]=this.xPoints.length-this.blackpos[i][j]-1;                \n                this.allpos.set(this.blackpos[i][j],this.blackchs[this.blackpos[i][0]]);\n                this.allpos.set(this.redpos[i][j],this.redchs[this.redpos[i][0]]);                \n            }\n        }\n        this.xChessPos=[];\n        for(let i=0;i<this.xPlusPot.length;i++)\n        {\n            this.xChessPos.push(this.xPlusPot[i]);\n        }\n        for(let i=0;i<this.xPlusPot.length;i++)\n        {\n            this.xChessPos.push(this.xPoints.length-this.xPlusPot[i]-1);\n        }\n    }\n    start() {\n        this.grap=this.getComponent(Graphics);\n        if(!this.grap)\n        {\n            console.warn(\"please add graphic to the node\");\n            return;\n        }\n        this.grap.color=this.color;\n        this.ut=this.getComponent(UITransform);\n        this.draw();\n        this.initPos();\n        console.log(\"start\");\n        Utils.loadPrefabs(\"cell/Chess\",(prefab:Prefab)=>{\n            this.allpos.forEach((img:string,key:number)=>{\n                let n=instantiate(prefab);\n                let rtc=n.getComponentInChildren(RichTextComponent);\n                rtc.string=\"<img src='\"+img+\"'/>\";\n                rtc.lineHeight=100;\n                rtc.fontSize=100;\n                rtc.node.active=false;\n                let sprite=n.getComponentInChildren(SpriteComponent);\n                sprite.node.active=true;\n                sprite.spriteFrame=new SpriteFrame();\n                sprite.spriteFrame.texture=new Texture2D();\n                n.setParent(this.node);\n                n.setPosition(this.xPoints[key]);                \n                //let scale=Math.sqrt((this.cells.width/90));\n                //n.setScale(new Vec3(scale,scale,scale));\n            });\n            //let words:string=\"<color=#00ff00>楚河界汉</color>\";\n            let words:string=\"楚河界汉\";\n            for(let i=0;i<this.xWords.length;i++)\n            {\n                let n=instantiate(prefab);\n                let rtc=n.getComponentInChildren(RichTextComponent);\n                rtc.string=words[i];                \n                rtc.fontSize=50;\n                n.setParent(this.node);                \n                n.setPosition(this.xPoints[this.xWords[i]].add(new Vec3(this.cells.width/2,this.cells.height/2,0)));\n                if(i>1)\n                {                    \n                    let quat=math.Quat.fromEuler(n.rotation,0,0,180)\n                    n.setRotation(quat);\n                }                \n            }          \n            let ords:string=\"九八七六五四三二一987654321\";\n            for(let i=0;i<ords.length;i++)\n            {\n                let n=instantiate(prefab);\n                let rtc=n.getComponentInChildren(RichTextComponent);\n                rtc.string=ords[i]; \n                rtc.fontSize=30;               \n                n.setParent(this.node);    \n                let idx=i;\n                if(i>8) \n                {\n                    idx=this.xPoints.length-i-1;\n                    let pos=new Vec3(this.xPoints[idx].x,this.rect[2].y,0);\n                    n.setPosition(pos);\n                }\n                else\n                {\n                    let pos=new Vec3(this.xPoints[idx].x,this.rect[0].y,0);\n                    n.setPosition(pos);\n                }                \n            }\n        });\n\n        Utils.loadPrefabs(\"cell/Chess\",(prefab:Prefab)=>{\n            this.allpos.forEach((img:string,key:number)=>{\n                let n=instantiate(prefab);\n                let rtc=n.getComponentInChildren(RichTextComponent);\n                rtc.string=\"<img src='\"+img+\"'/>\";\n                rtc.lineHeight=100;\n                rtc.fontSize=100;\n                n.setParent(this.node);\n                n.setPosition(this.xPoints[key]);                \n                //let scale=Math.sqrt((this.cells.width/90));\n                //n.setScale(new Vec3(scale,scale,scale));\n            });\n            //let words:string=\"<color=#00ff00>楚河界汉</color>\";\n            let words:string=\"楚河界汉\";\n            for(let i=0;i<this.xWords.length;i++)\n            {\n                let n=instantiate(prefab);\n                let rtc=n.getComponentInChildren(RichTextComponent);\n                rtc.string=words[i];                \n                rtc.fontSize=50;\n                n.setParent(this.node);                \n                n.setPosition(this.xPoints[this.xWords[i]].add(new Vec3(this.cells.width/2,this.cells.height/2,0)));\n                if(i>1)\n                {                    \n                    let quat=math.Quat.fromEuler(n.rotation,0,0,180)\n                    n.setRotation(quat);\n                }                \n            }          \n            let ords:string=\"九八七六五四三二一987654321\";\n            for(let i=0;i<ords.length;i++)\n            {\n                let n=instantiate(prefab);\n                let rtc=n.getComponentInChildren(RichTextComponent);\n                rtc.string=ords[i]; \n                rtc.fontSize=30;               \n                n.setParent(this.node);    \n                let idx=i;\n                if(i>8) \n                {\n                    idx=this.xPoints.length-i-1;\n                    let pos=new Vec3(this.xPoints[idx].x,this.rect[2].y,0);\n                    n.setPosition(pos);\n                }\n                else\n                {\n                    let pos=new Vec3(this.xPoints[idx].x,this.rect[0].y,0);\n                    n.setPosition(pos);\n                }                \n            }\n        });\n    }        \n    draw()\n    {                \n        let border=25,edge=20;\n        this.border=border;\n        this.edge=edge;\n        let s=this.ut.contentSize;\n        this.grap.strokeColor=Color.RED;\n        //bigbox\n        let pts:Vec3[]=[];        \n        pts.push(new Vec3(-s.width/2+border,-s.height/2+border,0));\n        pts.push(new Vec3(-s.width/2+border,s.height/2-border,0));\n        pts.push(new Vec3(s.width/2-border,s.height/2-border,0));\n        pts.push(new Vec3(s.width/2-border,-s.height/2+border,0));\n        this.rect.push(...pts);\n        //points\n        let row=9,col=8;\n        let width=(s.width-border*2-edge*2)/(col+1);\n        let height=(s.height-border*2-edge*2)/(row+1);\n        this.cells=new Size(width,height);\n        this.grap.strokeColor=Color.RED;\n        for(let i=0;i<row+1;i++)\n        {\n            for(let j=0;j<col+1;j++)\n            {\n                this.xPoints.push(new Vec3(border+edge+width*(j+0.5)-s.width/2,border+edge+height*(i+0.5)-s.height/2,0));\n            }\n        }\n        this.grap.stroke();\n        //this.grap.strokeColor=Color.BLUE;\n        this.grap.moveTo(pts[pts.length-1].x,pts[pts.length-1].y);\n        for(let i=0;i<pts.length;i++)\n        {   \n            this.grap.lineTo(pts[i].x,pts[i].y);\n        }        \n        \n        for(let i=0;i<col+1;i++)\n        {\n            let leftx=pts[0].x+i*width+width/2+edge;\n            let lefty=pts[0].y+height/2+edge\n            if(i>0&&i<col)\n            {\n                this.grap.moveTo(leftx,lefty);\n                this.grap.lineTo(leftx,lefty+height*4);\n                this.grap.moveTo(leftx,lefty+height*5);\n                this.grap.lineTo(leftx,lefty+height*9);\n            }\n            else\n            {\n                this.grap.moveTo(leftx,lefty);\n                this.grap.lineTo(leftx,lefty+height*9);\n            }            \n        }\n        for(let i=0;i<row+1;i++)\n        {\n            let leftx=pts[0].x+width/2+edge;\n            let lefty=pts[0].y+height/2+edge;\n            this.grap.moveTo(leftx,lefty+height*i);\n            this.grap.lineTo(leftx+s.width-border*2-width-edge*2,lefty+height*i);\n        }\n        \n        this.grap.moveTo(this.xPoints[this.XRoad[0]].x,this.xPoints[this.XRoad[0]].y);\n        for(let i=1;i<this.XRoad.length;i++)\n        {\n            let idx=this.XRoad[i];\n            this.grap.lineTo(this.xPoints[idx].x,this.xPoints[idx].y);\n        }\n        this.grap.moveTo(this.xPoints[this.xPoints.length-this.XRoad[0]-1].x,this.xPoints[this.xPoints.length-this.XRoad[0]-1].y);\n        for(let i=1;i<this.XRoad.length;i++)\n        {\n            let idx=this.xPoints.length-this.XRoad[i]-1;\n            this.grap.lineTo(this.xPoints[idx].x,this.xPoints[idx].y);\n        }\n\n        this.drawCorss(0,0);        \n        for(let i=0;i<this.xPlusPot.length;i++)\n        {\n            let p=this.xPoints[this.xPlusPot[i]];            \n            this.drawCorss(p.x,p.y);\n            let p1=this.xPoints[this.xPoints.length-this.xPlusPot[i]-1];\n            this.drawCorss(p1.x,p1.y);\n        }\n        \n        this.grap.stroke();     \n        \n        this.unicodeTest();\n    }\n    unicodeTest()\n    {\n        let v=this.hex2Num('$1FA60');\n        console.log(v);\n        //this.label.string=String.fromCodePoint(v);\n        // this.label.string=String.fromCharCode(0x1FA60)+String.fromCodePoint(129632);        \n        // this.label.string='0x1FA60';\n        // this.label.string='\\u{1FA60}';\n        // this.label.string=String.fromCodePoint(...[0x1FA60]);\n        //TODO:query and display javascript version\n    }\n    parseHex(str:string,i:number)\n    {\n        // escape()\t使用转义序列替换某些字符来对字符串进行编码\n        // unescape()\t对使用 escape() 编码的字符串进行解码\n        // encodeURI()\t通过转义某些字符对 URI 进行编码\n        // decodeURI()\t对使用 encodeURI() 方法编码的字符串进行解码\n        // encodeURIComponent()\t通过某些转义字符对 URI 的组件进行编码\n        // deencodeURIComponent()\t对使用 encodeURIComponent() 方法编码的字符串进行解码\n\n        // ES6新增了几个专门处理4字节码点的函数。\n        // String.fromCodePoint()：从Unicode码点返回对应字符\n        // String.prototype.codePointAt()：从字符返回对应的码点\n        // String.prototype.at()：返回字符串给定位置的字符\n        \n        let ret:number=0;\n        if(i<str.length)\n        {\n            let ch=str[i];\n            if(ch=='A'||ch=='a')\n            {\n                ret=10;\n            }\n            else if(ch=='B'||ch=='b')\n            {\n                ret=11;\n            }\n            else if(ch=='C'||ch=='c')\n            {\n                ret=12;\n            }\n            else if(ch=='D'||ch=='d')\n            {\n                ret=13;\n            }\n            else if(ch=='E'||ch=='e')\n            {\n                ret=14;\n            }\n            else if(ch=='F'||ch=='f')\n            {\n                ret=15;\n            }\n            else\n            {                \n                ret=Number.parseInt(ch);                \n            }\n        }else\n        {\n            ret=0;   \n        }    \n        return ret;    \n    }\n    hex2Num(str:string)\n    {\n        let ret:number=0,hex:number=1;\n        for(let i=0;i<str.length-1;i++)\n        {            \n            let val=this.parseHex(str,str.length-1-i);            \n            ret+=val*hex;\n            //console.log(val+\":\"+hex+\":\"+ret);\n            hex*=16;\n        }\n        return ret;\n    }\n    drawCorss(x:number,y:number)\n    {\n        let p:Vec3=new Vec3(x,y,0);\n        let plslen=13,spare=7;\n        if(p.x-spare>this.xPoints[0].x &&p.x-spare<this.xPoints[this.xPoints.length-1].x\n            &&p.y-spare>this.xPoints[0].y&&p.y-spare<this.xPoints[this.xPoints.length-1].y)\n        {\n            this.grap.moveTo(p.x-spare-plslen,p.y-spare);\n            this.grap.lineTo(p.x-spare,p.y-spare);\n            this.grap.lineTo(p.x-spare,p.y-spare-plslen);\n        }\n        \n        if(p.x-spare>this.xPoints[0].x &&p.x-spare<this.xPoints[this.xPoints.length-1].x\n            &&p.y+spare>this.xPoints[0].y&&p.y+spare<this.xPoints[this.xPoints.length-1].y)\n        {\n            this.grap.moveTo(p.x-spare-plslen,p.y+spare);\n            this.grap.lineTo(p.x-spare,p.y+spare);\n            this.grap.lineTo(p.x-spare,p.y+spare+plslen);\n        }\n        if(p.x+spare>this.xPoints[0].x&&p.y+spare>this.xPoints[0].y\n            &&p.x+spare<this.xPoints[this.xPoints.length-1].x\n            &&p.y+spare<this.xPoints[this.xPoints.length-1].y\n            )\n        {\n            this.grap.moveTo(p.x+spare+plslen,p.y+spare);\n            this.grap.lineTo(p.x+spare,p.y+spare);\n            this.grap.lineTo(p.x+spare,p.y+spare+plslen);\n        }\n        if(p.x+spare>this.xPoints[0].x &&p.x+spare<this.xPoints[this.xPoints.length-1].x\n            &&p.y-spare>this.xPoints[0].y&&p.y-spare<this.xPoints[this.xPoints.length-1].y)\n        {\n            this.grap.moveTo(p.x+spare+plslen,p.y-spare);\n            this.grap.lineTo(p.x+spare,p.y-spare);\n            this.grap.lineTo(p.x+spare,p.y-spare-plslen);\n        }\n    }\n\n    update(deltaTime: number) {\n        //this.draw();\n    }\n}\n\n"]}