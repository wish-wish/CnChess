{"version":3,"sources":["file:///D:/Coding/Creator/CnChess2/assets/scripts/Chess/Qipu.ts"],"names":["_decorator","Component","Utils","ccclass","property","Qipu","FightPuBus","start","update","deltaTime","parse","steps","step","split","i","length","pieces","dirs","vertidxs","idxpiece","indexOf","idxp","redchs","vertidx","dir","pos","pics","x","y","blackchs","idx"],"mappings":";;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,K,iBAAAA,K;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;sBAGjBK,I,WADZF,OAAO,CAAC,MAAD,C,gBAAR,MACaE,IADb,SAC0BJ,SAD1B,CACoC;AAAA;AAAA;AAAA,eAEzBK,UAFyB,GAEP,EAFO;AAAA;;AAIhCC,QAAAA,KAAK,GAAG,CAEP;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAEkB,eAALC,KAAK,CAACC,KAAD,EACnB;AACI,cAAIC,IAAa,GAACD,KAAK,CAACE,KAAN,CAAY,EAAZ,CAAlB;;AACA,eAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACF,IAAI,CAACG,MAAnB,EAA0BD,CAAC,EAA3B,EACA;AACI,gBAAIE,MAAM,GAAC,kBAAX;AACA,gBAAIC,IAAI,GAAC,MAAT;AACA,gBAAIC,QAAQ,GAAC,oBAAb,CAHJ,CAII;AACA;;AACA,gBAAIC,QAAQ,GAACH,MAAM,CAACI,OAAP,CAAeR,IAAI,CAAC,CAAD,CAAnB,CAAb;AACA,gBAAIS,IAAI,GAACF,QAAQ,GAAC;AAAA;AAAA,gCAAMG,MAAN,CAAaP,MAA/B;AACA,gBAAIQ,OAAO,GAACL,QAAQ,CAACE,OAAT,CAAiBR,IAAI,CAAC,CAAD,CAArB,CAAZ;AACA,gBAAIY,GAAG,GAACP,IAAI,CAACG,OAAL,CAAaR,IAAI,CAAC,CAAD,CAAjB,IAAsB,CAA9B;AACA,gBAAIa,GAAG,GAACP,QAAQ,CAACE,OAAT,CAAiBR,IAAI,CAAC,CAAD,CAArB,CAAR;AACA,gBAAIc,IAAI,GAAC,EAAT;AACA,gBAAIC,CAAC,GAAC,CAAN;AAAA,gBAAQC,CAAC,GAAC,CAAV;;AACA,gBAAGT,QAAQ,GAAC,EAAZ,EAAe;AACXE,cAAAA,IAAI,GAAC,CAAL;AACH;;AACD,gBAAGE,OAAO,GAAC,CAAX,EACA;AACIG,cAAAA,IAAI,GAAC;AAAA;AAAA,kCAAMJ,MAAN,CAAaD,IAAb,CAAL;AACH,aAHD,MAKA;AACIK,cAAAA,IAAI,GAAC;AAAA;AAAA,kCAAMG,QAAN,CAAeR,IAAf,CAAL;AACH;;AACD,gBAAIS,GAAG,GAACL,GAAR;;AACA,gBAAGA,GAAG,GAAC,CAAP,EACA;AACI;AACH;;AACD,gBAAGD,GAAG,IAAE,CAAR,EACA;AACI;AACAI,cAAAA,CAAC,GAACA,CAAC,IAAEL,OAAO,GAAC,CAAR,GAAU,CAAZ,CAAH;AACH,aAJD,MAKK,IAAGC,GAAG,IAAE,CAAR,EACL,CACI;AACH,aAHI,MAKL,CACI;AACH;AACJ;AACJ;;AA3D+B,O","sourcesContent":["import { _decorator, Component, Node } from 'cc';\nimport { Utils } from '../Utils';\nimport { Piece,PuBu } from './Piece';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Qipu')\nexport class Qipu extends Component {\n    \n    public FightPuBus:PuBu[]=[];\n\n    start() {\n\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    public static parse(steps:string)\n    {\n        let step:string[]=steps.split('');\n        for(let i=0;i<step.length;i++)\n        {            \n            let pieces=\"车马跑象士将兵車馬炮相仕帥卒帅將\";\n            let dirs=\"进退平進\";\n            let vertidxs=\"九八七六五四三二一987654321\";\n            //let fbs=\"前后\";\n            //let fb=fbs.indexOf(step[idx]);            \n            let idxpiece=pieces.indexOf(step[0]);\n            let idxp=idxpiece%Utils.redchs.length;                        \n            let vertidx=vertidxs.indexOf(step[3]); \n            let dir=dirs.indexOf(step[2])%3;\n            let pos=vertidxs.indexOf(step[1]);            \n            let pics=\"\";\n            let x=0,y=0;\n            if(idxpiece>13){\n                idxp=5;\n            }\n            if(vertidx>8)\n            {\n                pics=Utils.redchs[idxp];\n            }\n            else\n            {\n                pics=Utils.blackchs[idxp];\n            }\n            let idx=pos;\n            if(pos>8)\n            {\n                ;\n            }\n            if(dir==0)\n            {\n                //...\n                y=y+(vertidx%9+1);\n            }\n            else if(dir==1)\n            {\n                //...\n            }\n            else\n            {\n                //...\n            }\n        }        \n    }\n}\n\n"]}