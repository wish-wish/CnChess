{"version":3,"sources":["file:///D:/Coding/Creator/CnChess2/assets/scripts/PointInRect.ts"],"names":["_decorator","Component","ccclass","property","PointInRect","start","pointInPolygonFlat","point","vs","end","x","y","inside","undefined","length","len","i","j","xi","yi","xj","yj","intersect","pointInPolygonNested"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PointInRect')\r\nexport class PointInRect extends Component {\r\n    // [1]\r\n    // dummy = '';\r\n\r\n    // [2]\r\n    // @property\r\n    // serializableDummy = 0;\r\n\r\n    start () {\r\n        // [3]\r\n    }\r\n\r\n    //https://wrf.ecse.rpi.edu/Research/Short_Notes/pnpoly.html\r\n    \r\n    //https://www.cnblogs.com/anningwang/p/7581545.html\r\n    //https://cloud.tencent.com/developer/article/1644785\r\n    \r\n    static pointInPolygonFlat (point:number[], vs:number[], start?:number, end?:number) {\r\n        var x = point[0], y = point[1];\r\n        var inside = false;\r\n        if (start === undefined) start = 0;\r\n        if (end === undefined) end = vs.length;\r\n        var len = (end-start)/2;\r\n        for (var i = 0, j = len - 1; i < len; j = i++) {\r\n            var xi = vs[start+i*2+0], yi = vs[start+i*2+1];\r\n            var xj = vs[start+j*2+0], yj = vs[start+j*2+1];\r\n            var intersect = ((yi > y) !== (yj > y))\r\n                && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\r\n            if (intersect) inside = !inside;\r\n        }\r\n        return inside;\r\n    };\r\n\r\n    static pointInPolygonNested (point:number[], vs:number[][], start?:number, end?:number) {\r\n        var x = point[0], y = point[1];\r\n        var inside = false;\r\n        if (start === undefined) start = 0;\r\n        if (end === undefined) end = vs.length;\r\n        var len = end - start;\r\n        for (var i = 0, j = len - 1; i < len; j = i++) {\r\n            var xi = vs[i+start][0], yi = vs[i+start][1];\r\n            var xj = vs[j+start][0], yj = vs[j+start][1];\r\n            var intersect = ((yi > y) !== (yj > y))\r\n                && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\r\n            if (intersect) inside = !inside;\r\n        }\r\n        return inside;\r\n    };\r\n\r\n    // update (deltaTime: number) {\r\n    //     // [4]\r\n    // }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.0/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.0/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.0/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}